<ion-header class="settings-header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Settings</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="settings-content">
  <!-- User Profile Section -->
  <div class="profile-section" *ngIf="userProfile">
    <div class="profile-card">
      <ion-avatar class="profile-avatar">
        <img [src]="userProfile?.photoURL || 'assets/default-avatar.png'" />
      </ion-avatar>
      <div class="profile-info">
        <h2>{{ userProfile?.fullName || 'User' }}</h2>
        <p>{{ userProfile?.email }}</p>
        <ion-button fill="outline" size="small" (click)="editProfile()">
          Edit Profile
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Settings Sections -->
  <div class="settings-sections">
    <!-- Account Settings -->
    <div class="settings-section">
      <h3>Account</h3>
      <ion-list>
        <ion-item button (click)="editProfile()">
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Edit Profile</h2>
            <p>Update your personal information</p>
          </ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button (click)="changePassword()">
          <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Change Password</h2>
            <p>Update your account password</p>
          </ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>
      </ion-list>
    </div>

    <!-- Preferences -->
    <div class="settings-section">
      <h3>Preferences</h3>
      <ion-list>
        <ion-item>
          <ion-icon name="notifications-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Notifications</h2>
            <p>Receive push notifications</p>
          </ion-label>
          <ion-toggle 
            [(ngModel)]="notificationsEnabled" 
            (ionChange)="toggleNotifications()"
            slot="end">
          </ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="moon-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Dark Mode</h2>
            <p>Use dark theme</p>
          </ion-label>
          <ion-toggle 
            [(ngModel)]="darkModeEnabled" 
            (ionChange)="toggleDarkMode()"
            slot="end">
          </ion-toggle>
        </ion-item>

        <ion-item>
          <ion-icon name="eye-off-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Privacy Mode</h2>
            <p>Hide your online status</p>
          </ion-label>
          <ion-toggle 
            [(ngModel)]="privacyMode" 
            (ionChange)="togglePrivacyMode()"
            slot="end">
          </ion-toggle>
        </ion-item>
      </ion-list>
    </div>

    <!-- App Settings -->
    <div class="settings-section">
      <h3>App</h3>
      <ion-list>
        <ion-item button (click)="clearCache()">
          <ion-icon name="trash-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Clear Cache</h2>
            <p>Free up storage space</p>
          </ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button>
          <ion-icon name="help-circle-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Help & Support</h2>
            <p>Get help and contact support</p>
          </ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>

        <ion-item button>
          <ion-icon name="document-text-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Terms & Privacy</h2>
            <p>Read our terms and privacy policy</p>
          </ion-label>
          <ion-icon name="chevron-forward" slot="end"></ion-icon>
        </ion-item>
      </ion-list>
    </div>

    <!-- Logout Section -->
    <div class="settings-section">
      <ion-list>
        <ion-item button (click)="logout()" class="logout-item">
          <ion-icon name="log-out-outline" slot="start" color="danger"></ion-icon>
          <ion-label color="danger">
            <h2>Logout</h2>
            <p>Sign out of your account</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>
  </div>
</ion-content>
