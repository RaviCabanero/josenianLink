<ion-header translucent="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Notifications</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="markAllAsRead()" *ngIf="hasUnreadNotifications()">
        <ion-icon name="checkmark-done"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Notifications</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Loading notifications...</p>
  </div>

  <!-- Notifications List -->
  <div *ngIf="!loading" class="notifications-container">
    <div *ngIf="notifications.length === 0" class="empty-state">
      <ion-icon name="notifications-off-outline"></ion-icon>
      <h3>No Notifications</h3>
      <p>You're all caught up! New notifications will appear here.</p>
    </div>

    <ion-list *ngIf="notifications.length > 0" lines="none">
      <ion-item
        *ngFor="let notification of notifications; trackBy: trackByNotificationId"
        [ngClass]="{'unread': !notification.read}"
        (click)="onNotificationClick(notification)"
        button="true"
      >
        <ion-icon
          [name]="getNotificationIcon(notification.type)"
          [color]="getNotificationColor(notification.type)"
          slot="start"
        ></ion-icon>

        <ion-label>
          <h2>{{ notification.title }}</h2>
          <p>{{ notification.body }}</p>
          <p class="timestamp">{{ getTimeAgo(notification.timestamp) }}</p>
        </ion-label>

        <ion-badge
          *ngIf="!notification.read"
          color="primary"
          slot="end"
        >
          New
        </ion-badge>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
