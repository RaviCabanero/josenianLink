<ion-header class="modern-header">
  <div class="header-container">
    <div class="header-content">
      <!-- Navigation Section -->
      <div class="nav-section">
        <div class="nav-wrapper">
          <ion-button fill="clear" class="back-btn" (click)="goBack()">
            <ion-icon name="arrow-back-outline"></ion-icon>
          </ion-button>
          <div class="page-info">
            <h1 class="page-title">Notifications</h1>
            <p class="page-subtitle">Stay updated with your activities</p>
          </div>
        </div>
      </div>

      <!-- Actions Section -->
      <div class="actions-section">
        <div class="header-actions">
          <ion-button fill="clear" class="action-btn mark-read-btn" (click)="markAllAsRead()" *ngIf="hasUnreadNotifications()">
            <ion-icon name="checkmark-done-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" class="action-btn" (click)="navigateToSettings()">
            <ion-icon name="settings-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" class="action-btn logout-btn" (click)="logout()">
            <ion-icon name="log-out-outline"></ion-icon>
          </ion-button>
        </div>
      </div>
    </div>
  </div>
</ion-header>

<ion-content class="notifications-content">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-content">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <p>Loading notifications...</p>
    </div>
  </div>

  <!-- Notifications Container -->
  <div *ngIf="!loading" class="notifications-container">
    <!-- Empty State -->
    <div *ngIf="notifications.length === 0" class="empty-state">
      <div class="empty-content">
        <div class="empty-icon">
          <ion-icon name="notifications-off-outline"></ion-icon>
        </div>
        <h3>No Notifications</h3>
        <p>You're all caught up! New notifications will appear here.</p>
        <ion-button fill="outline" class="refresh-button" (click)="refreshNotifications()">
          <ion-icon name="refresh" slot="start"></ion-icon>
          Refresh
        </ion-button>
      </div>
    </div>

    <!-- Notifications List -->
    <div *ngIf="notifications.length > 0" class="notifications-list">
      <div class="notifications-header" *ngIf="hasUnreadNotifications()">
        <h2>{{ getUnreadCount() }} new notification{{ getUnreadCount() > 1 ? 's' : '' }}</h2>
      </div>

      <div class="notification-card"
           *ngFor="let notification of notifications; trackBy: trackByNotificationId"
           [ngClass]="{'unread': !notification.read, 'read': notification.read}"
           (click)="onNotificationClick(notification)">

        <div class="notification-icon">
          <ion-icon
            [name]="getNotificationIcon(notification.type)"
            [color]="getNotificationColor(notification.type)">
          </ion-icon>
        </div>

        <div class="notification-content">
          <div class="notification-header">
            <h3 class="notification-title">{{ notification.title }}</h3>
            <span class="notification-time">{{ getTimeAgo(notification.timestamp) }}</span>
          </div>
          <p class="notification-body">{{ notification.body }}</p>
          <div class="notification-meta" *ngIf="notification.data">
            <span class="notification-type">{{ getNotificationTypeLabel(notification.type) }}</span>
          </div>
        </div>

        <div class="notification-status" *ngIf="!notification.read">
          <div class="unread-indicator"></div>
        </div>
      </div>
    </div>
  </div>
</ion-content>

<ion-footer class="modern-footer">
  <ion-toolbar>
    <div class="footer-buttons">
      <ion-button fill="clear" routerLink="/home" class="footer-nav-btn">
        <ion-icon name="home" slot="icon-only"></ion-icon>
        <span class="nav-label">Home</span>
      </ion-button>
      <ion-button fill="clear" routerLink="/events" class="footer-nav-btn">
        <ion-icon name="calendar" slot="icon-only"></ion-icon>
        <span class="nav-label">Events</span>
      </ion-button>
      <ion-button fill="clear" routerLink="/notifications" class="footer-nav-btn active">
        <ion-icon name="notifications" slot="icon-only"></ion-icon>
        <span class="nav-label">Notifications</span>
        <div class="notification-badge" *ngIf="hasUnreadNotifications()">{{ getUnreadCount() }}</div>
      </ion-button>
      <ion-button fill="clear" routerLink="/profile" class="footer-nav-btn">
        <ion-icon name="person" slot="icon-only"></ion-icon>
        <span class="nav-label">Profile</span>
      </ion-button>
      <ion-button fill="clear" routerLink="/messages" class="footer-nav-btn">
        <ion-icon name="chatbox-ellipses" slot="icon-only"></ion-icon>
        <span class="nav-label">Messages</span>
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
