<!-- Stunning Register Design with USJR Colors -->
<div class="register-page-wrapper">
  <!-- Animated Background -->
  <div class="animated-background">
    <div class="floating-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
      <div class="shape shape-6"></div>
    </div>
  </div>

  <!-- Main Content -->
  <ion-content class="register-content">
    <div class="register-container">
      <!-- University Branding Header -->
      <div class="university-header" *ngIf="!isInputFocused">
        <div class="logo-section">
          <div class="logo-wrapper">
            <img src="assets/alumnilogo.webp" alt="USJ-R Seal" class="university-logo" />
            <div class="logo-glow"></div>
          </div>
          <div class="university-info">
            <h1 class="university-name">University of San Jose - Recoletos</h1>
            <p class="university-tagline">Join the Josenian Alumni Network</p>
          </div>
        </div>

        <div class="josenianlink-branding">
          <h2 class="app-title">
            <span class="josenian-text">JOSENIAN</span>
            <span class="link-text">LINK</span>
            <div class="title-underline"></div>
          </h2>
          <p class="app-subtitle">Create Your Alumni Account</p>
        </div>
      </div>

      <!-- Register Card -->
      <div class="register-card-modern">
        <div class="card-header">
          <h3 class="register-title">Join Our Community</h3>
          <p class="register-subtitle">Connect with fellow Josenian alumni worldwide</p>
        </div>

        <div class="form-container">
          <!-- Name Row -->
          <div class="name-fields-row">
            <div class="input-group half-width">
              <div class="input-wrapper">
                <ion-icon name="person-outline" class="input-icon-modern"></ion-icon>
                <ion-input
                  [(ngModel)]="firstName"
                  type="text"
                  required
                  class="modern-input"
                  placeholder="First Name"
                  fill="outline"
                  (focus)="isInputFocused = true"
                  (blur)="checkBlur()">
                </ion-input>
                <div class="input-focus-line"></div>
              </div>
            </div>

            <div class="input-group half-width">
              <div class="input-wrapper">
                <ion-icon name="person-outline" class="input-icon-modern"></ion-icon>
                <ion-input
                  [(ngModel)]="lastName"
                  type="text"
                  required
                  class="modern-input"
                  placeholder="Last Name"
                  fill="outline"
                  (focus)="isInputFocused = true"
                  (blur)="checkBlur()">
                </ion-input>
                <div class="input-focus-line"></div>
              </div>
            </div>
          </div>

          <!-- ID Number -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="card-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="idNumber"
                type="text"
                required
                class="modern-input"
                placeholder="Student ID Number"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()">
              </ion-input>
              <div class="input-focus-line"></div>
            </div>
          </div>

          <!-- Date Graduated -->
          <div class="input-group">
            <div class="date-picker-wrapper">
              <div class="date-picker-trigger" [class.active]="isDatePickerOpen" (click)="toggleDatePicker()">
                <ion-icon name="calendar-outline" class="input-icon-modern"></ion-icon>
                <span class="date-picker-text" [class.placeholder]="!graduationDate">
                  {{ graduationDate ? formatGraduationDate(graduationDate) : 'Date Graduated' }}
                </span>
                <ion-icon
                  name="chevron-down-outline"
                  class="dropdown-arrow"
                  [class.rotated]="isDatePickerOpen">
                </ion-icon>
              </div>

              <div class="date-picker-modal" [class.open]="isDatePickerOpen">
                <!-- Calendar Header -->
                <div class="calendar-header">
                  <ion-button
                    fill="clear"
                    (click)="previousMonth()"
                    class="nav-btn">
                    <ion-icon name="chevron-back"></ion-icon>
                  </ion-button>

                  <div class="month-year-title" (click)="toggleYearPicker()">
                    {{ getMonthYearTitle() }}
                    <ion-icon name="chevron-down" class="year-dropdown-icon"></ion-icon>
                  </div>

                  <ion-button
                    fill="clear"
                    (click)="nextMonth()"
                    class="nav-btn">
                    <ion-icon name="chevron-forward"></ion-icon>
                  </ion-button>
                </div>

                <!-- Year Picker Dropdown -->
                <div class="year-picker-dropdown" [class.open]="isYearPickerOpen">
                  <div class="year-list">
                    <div
                      *ngFor="let year of availableYears"
                      class="year-option"
                      [class.selected]="year === currentCalendarDate.getFullYear()"
                      (click)="selectYear(year)">
                      {{ year }}
                    </div>
                  </div>
                </div>

                <!-- Calendar Grid -->
                <div class="calendar-grid">
                  <!-- Weekday Headers -->
                  <div class="weekday-headers">
                    <div class="weekday-header" *ngFor="let day of weekDays">{{ day }}</div>
                  </div>

                  <!-- Calendar Days -->
                  <div class="calendar-days">
                    <div
                      *ngFor="let day of calendarDays"
                      class="calendar-day"
                      [class.other-month]="!day.isCurrentMonth"
                      [class.selected]="day.isSelected"
                      [class.today]="day.isToday"
                      [class.disabled]="day.isDisabled"
                      (click)="selectDay(day)">
                      {{ day.day }}
                    </div>
                  </div>
                </div>

                <!-- Confirm Button -->
                <div class="calendar-confirm">
                  <ion-button
                    (click)="confirmDate()"
                    [disabled]="!selectedCalendarDate"
                    expand="block"
                    class="confirm-date-btn">
                    Confirm
                  </ion-button>
                </div>

                <!-- Calendar Actions -->
                <div class="calendar-actions">
                  <ion-button
                    fill="clear"
                    (click)="clearDate()"
                    class="cancel-btn">
                    Cancel
                  </ion-button>
                </div>
              </div>

              <div class="date-validation" *ngIf="showDateError">
                <ion-icon name="alert-circle-outline"></ion-icon>
                <span>Please select graduation date</span>
              </div>
            </div>
          </div>

          <!-- Program Selection -->
          <div class="input-group">
            <div class="program-dropdown-wrapper">
              <div class="dropdown-trigger" [class.active]="isProgramDropdownOpen" (click)="toggleProgramDropdown()">
                <ion-icon name="school-outline" class="input-icon-modern"></ion-icon>
                <span class="dropdown-text" [class.placeholder]="!program">
                  {{ program ? getProgramDisplayName(program) : 'Select Program' }}
                </span>
                <ion-icon
                  name="chevron-down-outline"
                  class="dropdown-arrow"
                  [class.rotated]="isProgramDropdownOpen">
                </ion-icon>
              </div>

              <div class="dropdown-options" [class.open]="isProgramDropdownOpen">
                <div
                  class="dropdown-option"
                  [class.selected]="program === 'BSIT'"
                  (click)="selectProgram('BSIT')">
                  <div class="option-icon">
                    <ion-icon name="laptop-outline"></ion-icon>
                  </div>
                  <div class="option-content">
                    <span class="option-code">BSIT</span>
                    <span class="option-name">Bachelor of Science in Information Technology</span>
                  </div>
                  <div class="option-check" *ngIf="program === 'BSIT'">
                    <ion-icon name="checkmark"></ion-icon>
                  </div>
                </div>

                <div
                  class="dropdown-option"
                  [class.selected]="program === 'BSBA'"
                  (click)="selectProgram('BSBA')">
                  <div class="option-icon">
                    <ion-icon name="briefcase-outline"></ion-icon>
                  </div>
                  <div class="option-content">
                    <span class="option-code">BSBA</span>
                    <span class="option-name">Bachelor of Science in Business Administration</span>
                  </div>
                  <div class="option-check" *ngIf="program === 'BSBA'">
                    <ion-icon name="checkmark"></ion-icon>
                  </div>
                </div>

                <div
                  class="dropdown-option"
                  [class.selected]="program === 'BSN'"
                  (click)="selectProgram('BSN')">
                  <div class="option-icon">
                    <ion-icon name="medical-outline"></ion-icon>
                  </div>
                  <div class="option-content">
                    <span class="option-code">BSN</span>
                    <span class="option-name">Bachelor of Science in Nursing</span>
                  </div>
                  <div class="option-check" *ngIf="program === 'BSN'">
                    <ion-icon name="checkmark"></ion-icon>
                  </div>
                </div>
              </div>

              <div class="program-validation" *ngIf="showProgramError">
                <ion-icon name="alert-circle-outline"></ion-icon>
                <span>Please select a program</span>
              </div>
            </div>
          </div>

          <!-- Contact Number -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="call-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="contactNumber"
                type="tel"
                required
                class="modern-input"
                placeholder="Contact Number"
                fill="outline"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()">
              </ion-input>
              <div class="input-focus-line"></div>
            </div>
          </div>

          <!-- Address -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="location-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="address"
                type="text"
                required
                class="modern-input"
                placeholder="Address"
                fill="outline"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()">
              </ion-input>
              <div class="input-focus-line"></div>
            </div>
          </div>

          <!-- Email -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="mail-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="email"
                type="email"
                required
                class="modern-input"
                placeholder="Email Address"
                fill="outline"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()">
              </ion-input>
              <div class="input-focus-line"></div>
            </div>
          </div>

          <!-- Password -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="lock-closed-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="password"
                type="password"
                required
                class="modern-input"
                placeholder="Create Password"
                fill="outline"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()"
                (ionInput)="onPasswordChange()">
              </ion-input>
              <div class="input-focus-line"></div>
            </div>
          </div>

          <!-- Confirm Password -->
          <div class="input-group">
            <div class="input-wrapper">
              <ion-icon name="lock-closed-outline" class="input-icon-modern"></ion-icon>
              <ion-input
                [(ngModel)]="confirmPassword"
                type="password"
                required
                class="modern-input"
                [class.error]="showPasswordMismatchError"
                placeholder="Confirm Password"
                fill="outline"
                (focus)="isInputFocused = true"
                (blur)="checkBlur()"
                (ionInput)="onConfirmPasswordChange()">
              </ion-input>
              <div class="input-focus-line" [class.error]="showPasswordMismatchError"></div>
            </div>
            <div class="password-validation" *ngIf="showPasswordMismatchError">
              <ion-icon name="alert-circle-outline"></ion-icon>
              <span>Passwords do not match</span>
            </div>
          </div>

          <!-- Action Section -->
          <div class="action-section">
            <ion-button
              expand="block"
              class="register-btn-modern"
              (click)="register()">
              <ion-icon name="person-add-outline" slot="start"></ion-icon>
              Create Account
              <div class="btn-ripple"></div>
            </ion-button>

            <div class="divider-section">
              <div class="divider-line"></div>
              <span class="divider-text">or</span>
              <div class="divider-line"></div>
            </div>

            <ion-button
              expand="block"
              class="login-link-modern"
              routerLink="/login">
              <ion-icon name="log-in-outline" slot="start"></ion-icon>
              Already have an account? Sign In
            </ion-button>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="register-footer">
        <p class="footer-text">© 2024 University of San Jose - Recoletos</p>
        <p class="footer-subtext">Building Tomorrow's Leaders Today</p>
      </div>
    </div>
  </ion-content>
</div>